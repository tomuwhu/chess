import{s as Je,n as Ce,r as xe}from"../chunks/scheduler.e108d1fd.js";import{S as $e,i as ze,g as T,s as V,e as me,h as K,y as se,c as Y,j as q,f as H,k as O,a as J,x as m,z as fe,m as ce,n as ae,A as ge,o as Ve}from"../chunks/index.f2f39a4a.js";function ee(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}var Ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Re={exports:{}};(function(r,s){(function(C,l){r.exports=l()})(Ye,function(){return function(C){var l={};function h(g){if(l[g])return l[g].exports;var d=l[g]={i:g,l:!1,exports:{}};return C[g].call(d.exports,d,d.exports,h),d.l=!0,d.exports}return h.m=C,h.c=l,h.d=function(g,d,G){h.o(g,d)||Object.defineProperty(g,d,{enumerable:!0,get:G})},h.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},h.t=function(g,d){if(1&d&&(g=h(g)),8&d||4&d&&typeof g=="object"&&g&&g.__esModule)return g;var G=Object.create(null);if(h.r(G),Object.defineProperty(G,"default",{enumerable:!0,value:g}),2&d&&typeof g!="string")for(var b in g)h.d(G,b,(function(E){return g[E]}).bind(null,b));return G},h.n=function(g){var d=g&&g.__esModule?function(){return g.default}:function(){return g};return h.d(d,"a",d),d},h.o=function(g,d){return Object.prototype.hasOwnProperty.call(g,d)},h.p="",h(h.s=0)}([function(C,l,h){h.r(l),h.d(l,"Game",function(){return te}),h.d(l,"moves",function(){return We}),h.d(l,"status",function(){return Ue}),h.d(l,"getFen",function(){return Ie}),h.d(l,"move",function(){return Qe}),h.d(l,"aiMove",function(){return qe});const g=["A","B","C","D","E","F","G","H"],d=["1","2","3","4","5","6","7","8"],G={KING_W:"K",QUEEN_W:"Q",ROOK_W:"R",BISHOP_W:"B",KNIGHT_W:"N",PAWN_W:"P",KING_B:"k",QUEEN_B:"q",ROOK_B:"r",BISHOP_B:"b",KNIGHT_B:"n",PAWN_B:"p"},b="black",E="white",S=[0,1,2,3,4],k={0:1,1:2,2:2,3:3,4:3,5:4},B={0:2,1:2,2:4,3:4,4:5,5:5},D={fullMove:1,halfMove:0,enPassant:null,isFinished:!1,checkMate:!1,check:!1,turn:E},v=Object.assign({pieces:{E1:"K",D1:"Q",A1:"R",H1:"R",C1:"B",F1:"B",B1:"N",G1:"N",A2:"P",B2:"P",C2:"P",D2:"P",E2:"P",F2:"P",G2:"P",H2:"P",E8:"k",D8:"q",A8:"r",H8:"r",C8:"b",F8:"b",B8:"n",G8:"n",A7:"p",B7:"p",C7:"p",D7:"p",E7:"p",F7:"p",G7:"p",H7:"p"},castling:{whiteShort:!0,blackShort:!0,whiteLong:!0,blackLong:!0}},D),F={UP:{A1:"A2",A2:"A3",A3:"A4",A4:"A5",A5:"A6",A6:"A7",A7:"A8",A8:null,B1:"B2",B2:"B3",B3:"B4",B4:"B5",B5:"B6",B6:"B7",B7:"B8",B8:null,C1:"C2",C2:"C3",C3:"C4",C4:"C5",C5:"C6",C6:"C7",C7:"C8",C8:null,D1:"D2",D2:"D3",D3:"D4",D4:"D5",D5:"D6",D6:"D7",D7:"D8",D8:null,E1:"E2",E2:"E3",E3:"E4",E4:"E5",E5:"E6",E6:"E7",E7:"E8",E8:null,F1:"F2",F2:"F3",F3:"F4",F4:"F5",F5:"F6",F6:"F7",F7:"F8",F8:null,G1:"G2",G2:"G3",G3:"G4",G4:"G5",G5:"G6",G6:"G7",G7:"G8",G8:null,H1:"H2",H2:"H3",H3:"H4",H4:"H5",H5:"H6",H6:"H7",H7:"H8",H8:null},DOWN:{A1:null,A2:"A1",A3:"A2",A4:"A3",A5:"A4",A6:"A5",A7:"A6",A8:"A7",B1:null,B2:"B1",B3:"B2",B4:"B3",B5:"B4",B6:"B5",B7:"B6",B8:"B7",C1:null,C2:"C1",C3:"C2",C4:"C3",C5:"C4",C6:"C5",C7:"C6",C8:"C7",D1:null,D2:"D1",D3:"D2",D4:"D3",D5:"D4",D6:"D5",D7:"D6",D8:"D7",E1:null,E2:"E1",E3:"E2",E4:"E3",E5:"E4",E6:"E5",E7:"E6",E8:"E7",F1:null,F2:"F1",F3:"F2",F4:"F3",F5:"F4",F6:"F5",F7:"F6",F8:"F7",G1:null,G2:"G1",G3:"G2",G4:"G3",G5:"G4",G6:"G5",G7:"G6",G8:"G7",H1:null,H2:"H1",H3:"H2",H4:"H3",H5:"H4",H6:"H5",H7:"H6",H8:"H7"},LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:"A1",B2:"A2",B3:"A3",B4:"A4",B5:"A5",B6:"A6",B7:"A7",B8:"A8",C1:"B1",C2:"B2",C3:"B3",C4:"B4",C5:"B5",C6:"B6",C7:"B7",C8:"B8",D1:"C1",D2:"C2",D3:"C3",D4:"C4",D5:"C5",D6:"C6",D7:"C7",D8:"C8",E1:"D1",E2:"D2",E3:"D3",E4:"D4",E5:"D5",E6:"D6",E7:"D7",E8:"D8",F1:"E1",F2:"E2",F3:"E3",F4:"E4",F5:"E5",F6:"E6",F7:"E7",F8:"E8",G1:"F1",G2:"F2",G3:"F3",G4:"F4",G5:"F5",G6:"F6",G7:"F7",G8:"F8",H1:"G1",H2:"G2",H3:"G3",H4:"G4",H5:"G5",H6:"G6",H7:"G7",H8:"G8"},RIGHT:{A1:"B1",A2:"B2",A3:"B3",A4:"B4",A5:"B5",A6:"B6",A7:"B7",A8:"B8",B1:"C1",B2:"C2",B3:"C3",B4:"C4",B5:"C5",B6:"C6",B7:"C7",B8:"C8",C1:"D1",C2:"D2",C3:"D3",C4:"D4",C5:"D5",C6:"D6",C7:"D7",C8:"D8",D1:"E1",D2:"E2",D3:"E3",D4:"E4",D5:"E5",D6:"E6",D7:"E7",D8:"E8",E1:"F1",E2:"F2",E3:"F3",E4:"F4",E5:"F5",E6:"F6",E7:"F7",E8:"F8",F1:"G1",F2:"G2",F3:"G3",F4:"G4",F5:"G5",F6:"G6",F7:"G7",F8:"G8",G1:"H1",G2:"H2",G3:"H3",G4:"H4",G5:"H5",G6:"H6",G7:"H7",G8:"H8",H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},UP_LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:"A2",B2:"A3",B3:"A4",B4:"A5",B5:"A6",B6:"A7",B7:"A8",B8:null,C1:"B2",C2:"B3",C3:"B4",C4:"B5",C5:"B6",C6:"B7",C7:"B8",C8:null,D1:"C2",D2:"C3",D3:"C4",D4:"C5",D5:"C6",D6:"C7",D7:"C8",D8:null,E1:"D2",E2:"D3",E3:"D4",E4:"D5",E5:"D6",E6:"D7",E7:"D8",E8:null,F1:"E2",F2:"E3",F3:"E4",F4:"E5",F5:"E6",F6:"E7",F7:"E8",F8:null,G1:"F2",G2:"F3",G3:"F4",G4:"F5",G5:"F6",G6:"F7",G7:"F8",G8:null,H1:"G2",H2:"G3",H3:"G4",H4:"G5",H5:"G6",H6:"G7",H7:"G8",H8:null},DOWN_RIGHT:{A1:null,A2:"B1",A3:"B2",A4:"B3",A5:"B4",A6:"B5",A7:"B6",A8:"B7",B1:null,B2:"C1",B3:"C2",B4:"C3",B5:"C4",B6:"C5",B7:"C6",B8:"C7",C1:null,C2:"D1",C3:"D2",C4:"D3",C5:"D4",C6:"D5",C7:"D6",C8:"D7",D1:null,D2:"E1",D3:"E2",D4:"E3",D5:"E4",D6:"E5",D7:"E6",D8:"E7",E1:null,E2:"F1",E3:"F2",E4:"F3",E5:"F4",E6:"F5",E7:"F6",E8:"F7",F1:null,F2:"G1",F3:"G2",F4:"G3",F5:"G4",F6:"G5",F7:"G6",F8:"G7",G1:null,G2:"H1",G3:"H2",G4:"H3",G5:"H4",G6:"H5",G7:"H6",G8:"H7",H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},UP_RIGHT:{A1:"B2",A2:"B3",A3:"B4",A4:"B5",A5:"B6",A6:"B7",A7:"B8",A8:null,B1:"C2",B2:"C3",B3:"C4",B4:"C5",B5:"C6",B6:"C7",B7:"C8",B8:null,C1:"D2",C2:"D3",C3:"D4",C4:"D5",C5:"D6",C6:"D7",C7:"D8",C8:null,D1:"E2",D2:"E3",D3:"E4",D4:"E5",D5:"E6",D6:"E7",D7:"E8",D8:null,E1:"F2",E2:"F3",E3:"F4",E4:"F5",E5:"F6",E6:"F7",E7:"F8",E8:null,F1:"G2",F2:"G3",F3:"G4",F4:"G5",F5:"G6",F6:"G7",F7:"G8",F8:null,G1:"H2",G2:"H3",G3:"H4",G4:"H5",G5:"H6",G6:"H7",G7:"H8",G8:null,H1:null,H2:null,H3:null,H4:null,H5:null,H6:null,H7:null,H8:null},DOWN_LEFT:{A1:null,A2:null,A3:null,A4:null,A5:null,A6:null,A7:null,A8:null,B1:null,B2:"A1",B3:"A2",B4:"A3",B5:"A4",B6:"A5",B7:"A6",B8:"A7",C1:null,C2:"B1",C3:"B2",C4:"B3",C5:"B4",C6:"B5",C7:"B6",C8:"B7",D1:null,D2:"C1",D3:"C2",D4:"C3",D5:"C4",D6:"C5",D7:"C6",D8:"C7",E1:null,E2:"D1",E3:"D2",E4:"D3",E5:"D4",E6:"D5",E7:"D6",E8:"D7",F1:null,F2:"E1",F3:"E2",F4:"E3",F5:"E4",F6:"E5",F7:"E6",F8:"E7",G1:null,G2:"F1",G3:"F2",G4:"F3",G5:"F4",G6:"F5",G7:"F6",G8:"F7",H1:null,H2:"G1",H3:"G2",H4:"G3",H5:"G4",H6:"G5",H7:"G6",H8:"G7"}},x=[[0,0,0,0,0,0,0,0],[5,5,5,5,5,5,5,5],[1,1,2,3,3,2,1,1],[.5,.5,1,2.5,2.5,1,.5,.5],[0,0,0,2,2,0,0,0],[.5,0,1,0,0,1,0,.5],[.5,0,0,-2,-2,0,0,.5],[0,0,0,0,0,0,0,0]],L=[[-4,-3,-2,-2,-2,-2,-3,-4],[-3,-2,0,0,0,0,-2,-3],[-2,0,1,1.5,1.5,1,0,-2],[-2,.5,1.5,2,2,1.5,.5,-2],[-2,0,1.5,2,2,1.5,0,-2],[-2,.5,1,1.5,1.5,1,.5,-2],[-3,-2,0,.5,.5,0,-2,-3],[-4,-3,-2,-2,-2,-2,-3,-4]],j=[[-2,-1,-1,-1,-1,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,1,1,.5,0,-1],[-1,.5,.5,1,1,.5,.5,-1],[-1,0,1,1,1,1,0,-1],[-1,1,1,1,1,1,1,-1],[-1,.5,0,0,0,0,.5,-1],[-2,-1,-1,-1,-1,-1,-1,-2]],R=[[0,0,0,0,0,0,0,0],[.5,1,1,1,1,1,1,.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[-.5,0,0,0,0,0,0,-.5],[0,0,0,.5,.5,0,0,0]],y=[[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-3,-4,-4,-5,-5,-4,-4,-3],[-2,-3,-3,-4,-4,-3,-3,-2],[-1,-2,-2,-2,-2,-2,-2,-1],[2,2,0,0,0,0,2,2],[2,3,1,0,0,1,3,2]],X=[[-2,-1,-1,-.5,-.5,-1,-1,-2],[-1,0,0,0,0,0,0,-1],[-1,0,.5,.5,.5,.5,0,-1],[-.5,0,.5,.5,.5,.5,0,-.5],[0,0,.5,.5,.5,.5,0,-.5],[-1,.5,.5,.5,.5,.5,0,-1],[-1,0,.5,0,0,0,0,-1],[-2,-1,-1,-.5,-.5,-1,-1,-2]],M={P:x.slice().reverse(),p:x,N:L.slice().reverse(),n:L,B:j.slice().reverse(),b:j,R:R.slice().reverse(),r:R,K:y.slice().reverse(),k:y,Q:X.slice().reverse(),q:X};function U(u){return F.UP[u]}function _(u){return F.DOWN[u]}function $(u){return F.LEFT[u]}function I(u){return F.RIGHT[u]}function W(u){return F.UP_LEFT[u]}function p(u){return F.UP_RIGHT[u]}function A(u){return F.DOWN_LEFT[u]}function f(u){return F.DOWN_RIGHT[u]}function N(u){const t=W(u);return t?U(t):null}function Q(u){const t=W(u);return t?$(t):null}function ve(u){const t=p(u);return t?U(t):null}function Be(u){const t=p(u);return t?I(t):null}function Fe(u){const t=A(u);return t?_(t):null}function De(u){const t=A(u);return t?$(t):null}function Ge(u){const t=f(u);return t?_(t):null}function be(u){const t=f(u);return t?I(t):null}function ke(u,t){return t===E?F.UP[u]:F.DOWN[u]}function pe(u,t){return t===E?F.UP_LEFT[u]:F.DOWN_RIGHT[u]}function Pe(u,t){return t===E?F.UP_RIGHT[u]:F.DOWN_LEFT[u]}function He(u,t){return t===E?F.DOWN_LEFT[u]:F.UP_RIGHT[u]}function Ae(u,t){return t===E?F.DOWN_RIGHT[u]:F.UP_LEFT[u]}function oe(u){return{k:10,q:9,r:5,b:3,n:3,p:1}[u.toLowerCase()]||0}function he(u){return typeof u=="string"&&u.match("^[a-hA-H]{1}[1-8]{1}$")}const de=-1e3,Ee=1e3;class ue{constructor(t=JSON.parse(JSON.stringify(v))){if(typeof t=="object")this.configuration=Object.assign({},D,t);else{if(typeof t!="string")throw new Error(`Unknown configuration type ${typeof config}.`);this.configuration=Object.assign({},D,function(i=""){const[n,o,e,a,P,c]=i.split(" "),w={pieces:Object.fromEntries(n.split("/").flatMap((z,re)=>{let Z=0;return z.split("").reduce((le,ie)=>{const _e=ie.match(/k|b|q|n|p|r/i);_e&&(le.push([`${g[Z]}${d[7-re]}`,_e[0]]),Z+=1);const ye=ie.match(/[1-8]/);return ye&&(Z+=Number(ye)),le},[])}))};return w.turn=o==="b"?b:E,w.castling={whiteLong:!1,whiteShort:!1,blackLong:!1,blackShort:!1},e.includes("K")&&(w.castling.whiteShort=!0),e.includes("k")&&(w.castling.blackShort=!0),e.includes("Q")&&(w.castling.whiteLong=!0),e.includes("q")&&(w.castling.blackLong=!0),he(a)&&(w.enPassant=a.toUpperCase()),w.halfMove=parseInt(P),w.fullMove=parseInt(c),w}(t))}this.configuration.castling||(this.configuration.castling={whiteShort:!0,blackShort:!0,whiteLong:!0,blackLong:!0}),this.history=[]}getAttackingFields(t=this.getPlayingColor()){let i=[];for(const n in this.configuration.pieces){const o=this.getPiece(n);this.getPieceColor(o)===t&&(i=[...i,...this.getPieceMoves(o,n)])}return i}isAttackingKing(t=this.getPlayingColor()){let i=null;for(const n in this.configuration.pieces){const o=this.getPiece(n);if(this.isKing(o)&&this.getPieceColor(o)!==t){i=n;break}}return this.isPieceUnderAttack(i)}isPieceUnderAttack(t){const i=this.getPieceOnLocationColor(t),n=this.getEnemyColor(i);let o=!1,e=t,a=0;for(;U(e)&&!o;){e=U(e),a++;const c=this.getPiece(e);if(c&&this.getPieceColor(c)===n&&(this.isRook(c)||this.isQueen(c)||this.isKing(c)&&a===1)&&(o=!0),c)break}for(e=t,a=0;_(e)&&!o;){e=_(e),a++;const c=this.getPiece(e);if(c&&this.getPieceColor(c)===n&&(this.isRook(c)||this.isQueen(c)||this.isKing(c)&&a===1)&&(o=!0),c)break}for(e=t,a=0;$(e)&&!o;){e=$(e),a++;const c=this.getPiece(e);if(c&&this.getPieceColor(c)===n&&(this.isRook(c)||this.isQueen(c)||this.isKing(c)&&a===1)&&(o=!0),c)break}for(e=t,a=0;I(e)&&!o;){e=I(e),a++;const c=this.getPiece(e);if(c&&this.getPieceColor(c)===n&&(this.isRook(c)||this.isQueen(c)||this.isKing(c)&&a===1)&&(o=!0),c)break}for(e=t,a=0;Pe(e,i)&&!o;){e=Pe(e,i),a++;const c=this.getPiece(e);if(c&&this.getPieceColor(c)===n&&(this.isBishop(c)||this.isQueen(c)||a===1&&(this.isKing(c)||this.isPawn(c)))&&(o=!0),c)break}for(e=t,a=0;pe(e,i)&&!o;){e=pe(e,i),a++;const c=this.getPiece(e);if(c&&this.getPieceColor(c)===n&&(this.isBishop(c)||this.isQueen(c)||a===1&&(this.isKing(c)||this.isPawn(c)))&&(o=!0),c)break}for(e=t,a=0;Ae(e,i)&&!o;){e=Ae(e,i),a++;const c=this.getPiece(e);if(c&&this.getPieceColor(c)===n&&(this.isBishop(c)||this.isQueen(c)||this.isKing(c)&&a===1)&&(o=!0),c)break}for(e=t,a=0;He(e,i)&&!o;){e=He(e,i),a++;const c=this.getPiece(e);if(c&&this.getPieceColor(c)===n&&(this.isBishop(c)||this.isQueen(c)||this.isKing(c)&&a===1)&&(o=!0),c)break}e=ve(t);let P=this.getPiece(e);return P&&this.getPieceColor(P)===n&&this.isKnight(P)&&(o=!0),e=Be(t),P=this.getPiece(e),P&&this.getPieceColor(P)===n&&this.isKnight(P)&&(o=!0),e=Q(t),P=this.getPiece(e),P&&this.getPieceColor(P)===n&&this.isKnight(P)&&(o=!0),e=N(t),P=this.getPiece(e),P&&this.getPieceColor(P)===n&&this.isKnight(P)&&(o=!0),e=Fe(t),P=this.getPiece(e),P&&this.getPieceColor(P)===n&&this.isKnight(P)&&(o=!0),e=De(t),P=this.getPiece(e),P&&this.getPieceColor(P)===n&&this.isKnight(P)&&(o=!0),e=Ge(t),P=this.getPiece(e),P&&this.getPieceColor(P)===n&&this.isKnight(P)&&(o=!0),e=be(t),P=this.getPiece(e),P&&this.getPieceColor(P)===n&&this.isKnight(P)&&(o=!0),o}hasPlayingPlayerCheck(){return this.isAttackingKing(this.getNonPlayingColor())}hasNonPlayingPlayerCheck(){return this.isAttackingKing(this.getPlayingColor())}getLowestValuePieceAttackingLocation(t,i=this.getPlayingColor()){let n=null;for(const o in this.configuration.pieces){const e=this.getPiece(o);this.getPieceColor(e)===i&&this.getPieceMoves(e,o).map(a=>{a===t&&(n===null||oe(e)<n)&&(n=oe(e))})}return n}getMoves(t=this.getPlayingColor(),i=null){const n={};let o=0;for(const P in this.configuration.pieces){const c=this.getPiece(P);if(this.getPieceColor(c)===t){const w=this.getPieceMoves(c,P);w.length&&o++,Object.assign(n,{[P]:w})}}const e=this.getAttackingFields(this.getNonPlayingColor());if(this.isLeftCastlingPossible(e)&&(this.isPlayingWhite()&&n.E1.push("C1"),this.isPlayingBlack()&&n.E8.push("C8")),this.isRightCastlingPossible(e)&&(this.isPlayingWhite()&&n.E1.push("G1"),this.isPlayingBlack()&&n.E8.push("G8")),i&&o>i)return n;const a={};for(const P in n)n[P].map(c=>{const w={pieces:Object.assign({},this.configuration.pieces),castling:Object.assign({},this.configuration.castling)},z=new ue(w);z.move(P,c),(this.isPlayingWhite()&&!z.isAttackingKing(b)||this.isPlayingBlack()&&!z.isAttackingKing(E))&&(a[P]||(a[P]=[]),a[P].push(c))});return Object.keys(a).length||(this.configuration.isFinished=!0,this.hasPlayingPlayerCheck()&&(this.configuration.checkMate=!0)),a}isLeftCastlingPossible(t){if(this.isPlayingWhite()&&!this.configuration.castling.whiteLong||this.isPlayingBlack()&&!this.configuration.castling.blackLong)return!1;let i=null;if(this.isPlayingWhite()&&this.getPiece("E1")==="K"&&this.getPiece("A1")==="R"&&!t.includes("E1")?i="E1":this.isPlayingBlack()&&this.getPiece("E8")==="k"&&this.getPiece("A8")==="r"&&!t.includes("E8")&&(i="E8"),!i)return!1;let n=$(i);return!this.getPiece(n)&&!t.includes(n)&&(n=$(n),!this.getPiece(n)&&!t.includes(n)&&(n=$(n),!this.getPiece(n)))}isRightCastlingPossible(t){if(this.isPlayingWhite()&&!this.configuration.castling.whiteShort||this.isPlayingBlack()&&!this.configuration.castling.blackShort)return!1;let i=null;if(this.isPlayingWhite()&&this.getPiece("E1")==="K"&&this.getPiece("H1")==="R"&&!t.includes("E1")?i="E1":this.isPlayingBlack()&&this.getPiece("E8")==="k"&&this.getPiece("H8")==="r"&&!t.includes("E8")&&(i="E8"),!i)return!1;let n=I(i);return!this.getPiece(n)&&!t.includes(n)&&(n=I(n),!this.getPiece(n)&&!t.includes(n))}getPieceMoves(t,i){return this.isPawn(t)?this.getPawnMoves(t,i):this.isKnight(t)?this.getKnightMoves(t,i):this.isRook(t)?this.getRookMoves(t,i):this.isBishop(t)?this.getBishopMoves(t,i):this.isQueen(t)?this.getQueenMoves(t,i):this.isKing(t)?this.getKingMoves(t,i):[]}isPawn(t){return t.toUpperCase()==="P"}isKnight(t){return t.toUpperCase()==="N"}isRook(t){return t.toUpperCase()==="R"}isBishop(t){return t.toUpperCase()==="B"}isQueen(t){return t.toUpperCase()==="Q"}isKing(t){return t.toUpperCase()==="K"}getPawnMoves(t,i){const n=[],o=this.getPieceColor(t);let e=ke(i,o);return e&&!this.getPiece(e)&&(n.push(e),e=ke(e,o),function(a,P){return a===E&&P[1]==="2"||a===b&&P[1]==="7"}(o,i)&&e&&!this.getPiece(e)&&n.push(e)),e=pe(i,o),e&&(this.getPiece(e)&&this.getPieceOnLocationColor(e)!==o||e===this.configuration.enPassant)&&n.push(e),e=Pe(i,o),e&&(this.getPiece(e)&&this.getPieceOnLocationColor(e)!==o||e===this.configuration.enPassant)&&n.push(e),n}getKnightMoves(t,i){const n=[],o=this.getPieceColor(t);let e=ve(i);return e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=Be(i),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=N(i),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=Q(i),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=De(i),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=Fe(i),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=be(i),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=Ge(i),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),n}getRookMoves(t,i){const n=[],o=this.getPieceColor(t);let e=i;for(;U(e);){e=U(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==o&&n.push(e),a)break}for(e=i;_(e);){e=_(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==o&&n.push(e),a)break}for(e=i;I(e);){e=I(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==o&&n.push(e),a)break}for(e=i;$(e);){e=$(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==o&&n.push(e),a)break}return n}getBishopMoves(t,i){const n=[],o=this.getPieceColor(t);let e=i;for(;W(e);){e=W(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==o&&n.push(e),a)break}for(e=i;p(e);){e=p(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==o&&n.push(e),a)break}for(e=i;A(e);){e=A(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==o&&n.push(e),a)break}for(e=i;f(e);){e=f(e);const a=this.getPieceOnLocationColor(e);if(this.getPieceOnLocationColor(e)!==o&&n.push(e),a)break}return n}getQueenMoves(t,i){return[...this.getRookMoves(t,i),...this.getBishopMoves(t,i)]}getKingMoves(t,i){const n=[],o=this.getPieceColor(t);let e=i;return e=U(e),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=i,e=I(e),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=i,e=_(e),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=i,e=$(e),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=i,e=W(e),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=i,e=p(e),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=i,e=A(e),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),e=i,e=f(e),e&&this.getPieceOnLocationColor(e)!==o&&n.push(e),n}getPieceColor(t){return t.toUpperCase()===t?E:b}getPieceOnLocationColor(t){const i=this.getPiece(t);return i?i.toUpperCase()===i?E:b:null}getPiece(t){return this.configuration.pieces[t]}setPiece(t,i){if(!function(n){return Object.values(G).includes(n)}(i))throw new Error("Invalid piece "+i);if(!he(t))throw new Error("Invalid location "+t);this.configuration.pieces[t.toUpperCase()]=i}removePiece(t){if(!he(t))throw new Error("Invalid location "+t);delete this.configuration.pieces[t.toUpperCase()]}isEmpty(t){if(!he(t))throw new Error("Invalid location "+t);return!this.configuration.pieces[t.toUpperCase()]}getEnemyColor(t){return t===E?b:E}getPlayingColor(){return this.configuration.turn}getNonPlayingColor(){return this.isPlayingWhite()?b:E}isPlayingWhite(){return this.configuration.turn===E}isPlayingBlack(){return this.configuration.turn===b}addMoveToHistory(t,i){this.history.push({from:t,to:i,configuration:JSON.parse(JSON.stringify(this.configuration))})}move(t,i){const n=this.getPiece(t),o=this.getPiece(i);if(!n)throw new Error("There is no piece at "+t);var e,a;if(Object.assign(this.configuration.pieces,{[i]:n}),delete this.configuration.pieces[t],this.isPlayingWhite()&&this.isPawn(n)&&i[1]==="8"&&Object.assign(this.configuration.pieces,{[i]:"Q"}),this.isPlayingBlack()&&this.isPawn(n)&&i[1]==="1"&&Object.assign(this.configuration.pieces,{[i]:"q"}),this.isPawn(n)&&i===this.configuration.enPassant&&delete this.configuration.pieces[e=i,a=this.getPlayingColor(),a===E?F.DOWN[e]:F.UP[e]],this.isPawn(n)&&this.isPlayingWhite()&&t[1]==="2"&&i[1]==="4"?this.configuration.enPassant=t[0]+"3":this.isPawn(n)&&this.isPlayingBlack()&&t[1]==="7"&&i[1]==="5"?this.configuration.enPassant=t[0]+"6":this.configuration.enPassant=null,t==="E1"&&Object.assign(this.configuration.castling,{whiteLong:!1,whiteShort:!1}),t==="E8"&&Object.assign(this.configuration.castling,{blackLong:!1,blackShort:!1}),t==="A1"&&Object.assign(this.configuration.castling,{whiteLong:!1}),t==="H1"&&Object.assign(this.configuration.castling,{whiteShort:!1}),t==="A8"&&Object.assign(this.configuration.castling,{blackLong:!1}),t==="H8"&&Object.assign(this.configuration.castling,{blackShort:!1}),this.isKing(n)){if(t==="E1"&&i==="C1")return this.move("A1","D1");if(t==="E8"&&i==="C8")return this.move("A8","D8");if(t==="E1"&&i==="G1")return this.move("H1","F1");if(t==="E8"&&i==="G8")return this.move("H8","F8")}this.configuration.turn=this.isPlayingWhite()?b:E,this.isPlayingWhite()&&this.configuration.fullMove++,this.configuration.halfMove++,(o||this.isPawn(n))&&(this.configuration.halfMove=0)}exportJson(){return{moves:this.getMoves(),pieces:this.configuration.pieces,turn:this.configuration.turn,isFinished:this.configuration.isFinished,check:this.hasPlayingPlayerCheck(),checkMate:this.configuration.checkMate,castling:this.configuration.castling,enPassant:this.configuration.enPassant,halfMove:this.configuration.halfMove,fullMove:this.configuration.fullMove}}calculateAiMove(t){return this.calculateAiMoves(t)[0]}calculateAiMoves(t){if(t=parseInt(t),!S.includes(t))throw new Error(`Invalid level ${t}. You can choose ${S.join(",")}`);this.shouldIncreaseLevel()&&t++;const i=[],n=this.calculateScore(this.getPlayingColor()),o=this.getMoves();for(const e in o)o[e].map(a=>{const P=this.getTestBoard(),c=!!P.getPiece(a);P.move(e,a),i.push({from:e,to:a,score:P.testMoveScores(this.getPlayingColor(),t,c,c?P.calculateScore(this.getPlayingColor()):n,a).score+P.calculateScoreByPiecesLocation(this.getPlayingColor())+Math.floor(Math.random()*(this.configuration.halfMove>10?this.configuration.halfMove-10:1)*10)/10})});return i.sort((e,a)=>e.score<a.score?1:e.score>a.score?-1:0),i}shouldIncreaseLevel(){return this.getIngamePiecesValue()<50}getIngamePiecesValue(){let t=0;for(const i in this.configuration.pieces)t+=oe(this.getPiece(i));return t}getTestBoard(){const t={pieces:Object.assign({},this.configuration.pieces),castling:Object.assign({},this.configuration.castling),turn:this.configuration.turn,enPassant:this.configuration.enPassant};return new ue(t)}testMoveScores(t,i,n,o,e,a=1){let P=null;if(a<B[i]&&this.hasPlayingPlayerCheck()?P=this.getMoves(this.getPlayingColor()):(a<k[i]||n&&a<B[i])&&(P=this.getMoves(this.getPlayingColor(),5)),this.configuration.isFinished)return{score:this.calculateScore(t)+(this.getPlayingColor()===t?a:-a),max:!0};if(!P)return o!==null?{score:o,max:!1}:{score:this.calculateScore(t),max:!1};let c=this.getPlayingColor()===t?de:Ee,w=!1;for(const z in P)w||P[z].map(re=>{if(w)return;const Z=this.getTestBoard(),le=!!Z.getPiece(re);if(Z.move(z,re),Z.hasNonPlayingPlayerCheck())return;const ie=Z.testMoveScores(t,i,le,le?Z.calculateScore(t):o,re,a+1);ie.max&&(w=!0),c=this.getPlayingColor()===t?Math.max(c,ie.score):Math.min(c,ie.score)});return{score:c,max:!1}}calculateScoreByPiecesLocation(t=this.getPlayingColor()){const i={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7};let n=0;for(const o in this.configuration.pieces){const e=this.getPiece(o);if(M[e]){const a=M[e][o[1]-1][i[o[0]]];n+=.5*(this.getPieceColor(e)===t?a:-a)}}return n}calculateScore(t=this.getPlayingColor()){let i=0;if(this.configuration.checkMate)return this.getPlayingColor()===t?de:Ee;if(this.configuration.isFinished)return this.getPlayingColor()===t?Ee:de;for(const n in this.configuration.pieces){const o=this.getPiece(n);this.getPieceColor(o)===t?i+=10*oe(o):i-=10*oe(o)}return i}}class te{constructor(t){this.board=new ue(t)}move(t,i){t=t.toUpperCase(),i=i.toUpperCase();const n=this.board.getMoves();if(!n[t]||!n[t].includes(i))throw new Error(`Invalid move from ${t} to ${i} for ${this.board.getPlayingColor()}`);return this.board.addMoveToHistory(t,i),this.board.move(t,i),{[t]:i}}moves(t=null){return(t?this.board.getMoves()[t.toUpperCase()]:this.board.getMoves())||[]}setPiece(t,i){this.board.setPiece(t,i)}removePiece(t){this.board.removePiece(t)}aiMove(t=2){const i=this.board.calculateAiMove(t);return this.move(i.from,i.to)}getHistory(t=!1){return t?this.board.history.reverse():this.board.history}printToConsole(){(function(t){process.stdout.write(`
`);let i=E;Object.assign([],d).reverse().map(n=>{process.stdout.write(""+n),g.map(o=>{switch(t.pieces[`${o}${n}`]){case"K":process.stdout.write("♚");break;case"Q":process.stdout.write("♛");break;case"R":process.stdout.write("♜");break;case"B":process.stdout.write("♝");break;case"N":process.stdout.write("♞");break;case"P":process.stdout.write("♟");break;case"k":process.stdout.write("♔");break;case"q":process.stdout.write("♕");break;case"r":process.stdout.write("♖");break;case"b":process.stdout.write("♗");break;case"n":process.stdout.write("♘");break;case"p":process.stdout.write("♙");break;default:process.stdout.write(i===E?"█":"░")}i=i===E?b:E}),i=i===E?b:E,process.stdout.write(`
`)}),process.stdout.write(" "),g.map(n=>{process.stdout.write(""+n)}),process.stdout.write(`
`)})(this.board.configuration)}exportJson(){return this.board.exportJson()}exportFEN(){return function(t){let i="";Object.assign([],d).reverse().map(P=>{let c=0;P<8&&(i+="/"),g.map(w=>{const z=t.pieces[`${w}${P}`];z?(c&&(i+=c.toString(),c=0),i+=z):c++}),i+=""+(c||"")}),i+=t.turn===E?" w ":" b ";const{whiteShort:n,whiteLong:o,blackLong:e,blackShort:a}=t.castling;return o||n||e||a?(n&&(i+="K"),o&&(i+="Q"),a&&(i+="k"),e&&(i+="q")):i+="-",i+=" "+(t.enPassant?t.enPassant.toLowerCase():"-"),i+=" "+t.halfMove,i+=" "+t.fullMove,i}(this.board.configuration)}}function We(u){if(!u)throw new Error("Configuration param required.");return new te(u).moves()}function Ue(u){if(!u)throw new Error("Configuration param required.");return new te(u).exportJson()}function Ie(u){if(!u)throw new Error("Configuration param required.");return new te(u).exportFEN()}function Qe(u,t,i){if(!u)throw new Error("Configuration param required.");const n=new te(u);return n.move(t,i),typeof u=="object"?n.exportJson():n.exportFEN()}function qe(u,t=2){if(!u)throw new Error("Configuration param required.");const i=new te(u).board.calculateAiMove(t);return{[i.from]:i.to}}}])})})(Re);var Ze=Re.exports;const et=Xe(Ze);function we(r,s,C){const l=r.slice();return l[14]=s[C],l}function Oe(r,s,C){const l=r.slice();return l[17]=s[C],l[19]=C,l}function Le(r,s,C){const l=r.slice();return l[14]=s[C],l[21]=C,l}function Me(r,s,C){const l=r.slice();return l[14]=s[C],l}function Te(r){let s,C=r[14]+"",l;return{c(){s=T("td"),l=ce(C),this.h()},l(h){s=K(h,"TD",{class:!0});var g=q(s);l=ae(g,C),g.forEach(H),this.h()},h(){O(s,"class","s svelte-1r16iky")},m(h,g){J(h,s,g),m(s,l)},p:Ce,d(h){h&&H(s)}}}function Ke(r){let s,C,l=r[4](r[0].pieces[r[14]+r[17]])+"",h,g,d,G,b,E;function S(){return r[7](r[19],r[21],r[17],r[14])}function k(...D){return r[9](r[14],r[17],...D)}function B(){return r[10](r[17],r[14])}return{c(){s=T("td"),C=T("span"),h=ce(l),this.h()},l(D){s=K(D,"TD",{class:!0});var v=q(s);C=K(v,"SPAN",{class:!0,draggable:!0});var F=q(C);h=ae(F,l),F.forEach(H),v.forEach(H),this.h()},h(){O(C,"class",g=r[0].pieces[r[14]+r[17]]+" "+(!r[1]&&r[2][1]==r[14]+r[17]?"u":"")+" svelte-1r16iky"),O(C,"draggable",d=!r[1]),O(s,"class",G="s"+(r[19]+r[21])%2+" "+(!r[1]&&r[3].includes(r[14]+r[17])?"x":"")+" svelte-1r16iky")},m(D,v){J(D,s,v),m(s,C),m(C,h),b||(E=[ge(C,"dragstart",S),ge(C,"dragend",r[8]),ge(s,"dragover",k),ge(s,"drop",B)],b=!0)},p(D,v){r=D,v&1&&l!==(l=r[4](r[0].pieces[r[14]+r[17]])+"")&&Ve(h,l),v&7&&g!==(g=r[0].pieces[r[14]+r[17]]+" "+(!r[1]&&r[2][1]==r[14]+r[17]?"u":"")+" svelte-1r16iky")&&O(C,"class",g),v&2&&d!==(d=!r[1])&&O(C,"draggable",d),v&10&&G!==(G="s"+(r[19]+r[21])%2+" "+(!r[1]&&r[3].includes(r[14]+r[17])?"x":"")+" svelte-1r16iky")&&O(s,"class",G)},d(D){D&&H(s),b=!1,xe(E)}}}function Se(r){let s,C,l=8-r[19]+"",h,g,d,G,b=8-r[19]+"",E,S=ee(ne),k=[];for(let B=0;B<S.length;B+=1)k[B]=Ke(Le(r,S,B));return{c(){s=T("tr"),C=T("td"),h=ce(l),g=V();for(let B=0;B<k.length;B+=1)k[B].c();d=V(),G=T("td"),E=ce(b),this.h()},l(B){s=K(B,"TR",{});var D=q(s);C=K(D,"TD",{class:!0});var v=q(C);h=ae(v,l),v.forEach(H),g=Y(D);for(let x=0;x<k.length;x+=1)k[x].l(D);d=Y(D),G=K(D,"TD",{class:!0});var F=q(G);E=ae(F,b),F.forEach(H),D.forEach(H),this.h()},h(){O(C,"class","o svelte-1r16iky"),O(G,"class","o svelte-1r16iky")},m(B,D){J(B,s,D),m(s,C),m(C,h),m(s,g);for(let v=0;v<k.length;v+=1)k[v]&&k[v].m(s,null);m(s,d),m(s,G),m(G,E)},p(B,D){if(D&127){S=ee(ne);let v;for(v=0;v<S.length;v+=1){const F=Le(B,S,v);k[v]?k[v].p(F,D):(k[v]=Ke(F),k[v].c(),k[v].m(s,d))}for(;v<k.length;v+=1)k[v].d(1);k.length=S.length}},d(B){B&&H(s),fe(k,B)}}}function je(r){let s,C=r[14]+"",l;return{c(){s=T("td"),l=ce(C),this.h()},l(h){s=K(h,"TD",{class:!0});var g=q(s);l=ae(g,C),g.forEach(H),this.h()},h(){O(s,"class","s svelte-1r16iky")},m(h,g){J(h,s,g),m(s,l)},p:Ce,d(h){h&&H(s)}}}function tt(r){let s,C=" ";return{c(){s=T("h2"),s.textContent=C,this.h()},l(l){s=K(l,"H2",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-slfcfw"&&(s.textContent=C),this.h()},h(){O(s,"class","svelte-1r16iky")},m(l,h){J(l,s,h)},d(l){l&&H(s)}}}function it(r){let s,C="Te lépsz!";return{c(){s=T("h2"),s.textContent=C,this.h()},l(l){s=K(l,"H2",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-1ndxojg"&&(s.textContent=C),this.h()},h(){O(s,"class","svelte-1r16iky")},m(l,h){J(l,s,h)},d(l){l&&H(s)}}}function nt(r){let s,C="Sakk";return{c(){s=T("h2"),s.textContent=C,this.h()},l(l){s=K(l,"H2",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-104b34s"&&(s.textContent=C),this.h()},h(){O(s,"class","svelte-1r16iky")},m(l,h){J(l,s,h)},d(l){l&&H(s)}}}function st(r){let s,C="Döntetlen";return{c(){s=T("h2"),s.textContent=C,this.h()},l(l){s=K(l,"H2",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-2zs3iy"&&(s.textContent=C),this.h()},h(){O(s,"class","svelte-1r16iky")},m(l,h){J(l,s,h)},d(l){l&&H(s)}}}function ot(r){let s,C="Matt";return{c(){s=T("h2"),s.textContent=C,this.h()},l(l){s=K(l,"H2",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-1079gac"&&(s.textContent=C),this.h()},h(){O(s,"class","svelte-1r16iky")},m(l,h){J(l,s,h)},d(l){l&&H(s)}}}function rt(r){let s,C="Sakk",l,h,g,d,G,b,E,S,k,B,D,v,F,x,L,j,R=ee(ne),y=[];for(let p=0;p<R.length;p+=1)y[p]=Te(Me(r,R,p));let X=ee(Ne),M=[];for(let p=0;p<X.length;p+=1)M[p]=Se(Oe(r,X,p));let U=ee(ne),_=[];for(let p=0;p<U.length;p+=1)_[p]=je(we(r,U,p));function $(p,A){return p[0].checkMate?ot:p[0].isFinished?st:p[0].check?nt:p[1]?tt:it}let I=$(r),W=I(r);return{c(){s=T("h1"),s.textContent=C,l=V(),h=T("table"),g=T("tr"),d=T("td"),G=V();for(let p=0;p<y.length;p+=1)y[p].c();b=V(),E=T("td"),S=V();for(let p=0;p<M.length;p+=1)M[p].c();k=V(),B=T("tr"),D=T("td"),v=V();for(let p=0;p<_.length;p+=1)_[p].c();F=V(),x=T("td"),L=V(),W.c(),j=me(),this.h()},l(p){s=K(p,"H1",{class:!0,"data-svelte-h":!0}),se(s)!=="svelte-masb5y"&&(s.textContent=C),l=Y(p),h=K(p,"TABLE",{class:!0});var A=q(h);g=K(A,"TR",{});var f=q(g);d=K(f,"TD",{class:!0}),q(d).forEach(H),G=Y(f);for(let Q=0;Q<y.length;Q+=1)y[Q].l(f);b=Y(f),E=K(f,"TD",{class:!0}),q(E).forEach(H),f.forEach(H),S=Y(A);for(let Q=0;Q<M.length;Q+=1)M[Q].l(A);k=Y(A),B=K(A,"TR",{});var N=q(B);D=K(N,"TD",{class:!0}),q(D).forEach(H),v=Y(N);for(let Q=0;Q<_.length;Q+=1)_[Q].l(N);F=Y(N),x=K(N,"TD",{class:!0}),q(x).forEach(H),N.forEach(H),A.forEach(H),L=Y(p),W.l(p),j=me(),this.h()},h(){O(s,"class","svelte-1r16iky"),O(d,"class","c svelte-1r16iky"),O(E,"class","c svelte-1r16iky"),O(D,"class","c svelte-1r16iky"),O(x,"class","c svelte-1r16iky"),O(h,"class","svelte-1r16iky")},m(p,A){J(p,s,A),J(p,l,A),J(p,h,A),m(h,g),m(g,d),m(g,G);for(let f=0;f<y.length;f+=1)y[f]&&y[f].m(g,null);m(g,b),m(g,E),m(h,S);for(let f=0;f<M.length;f+=1)M[f]&&M[f].m(h,null);m(h,k),m(h,B),m(B,D),m(B,v);for(let f=0;f<_.length;f+=1)_[f]&&_[f].m(B,null);m(B,F),m(B,x),J(p,L,A),W.m(p,A),J(p,j,A)},p(p,[A]){if(A&0){R=ee(ne);let f;for(f=0;f<R.length;f+=1){const N=Me(p,R,f);y[f]?y[f].p(N,A):(y[f]=Te(N),y[f].c(),y[f].m(g,b))}for(;f<y.length;f+=1)y[f].d(1);y.length=R.length}if(A&127){X=ee(Ne);let f;for(f=0;f<X.length;f+=1){const N=Oe(p,X,f);M[f]?M[f].p(N,A):(M[f]=Se(N),M[f].c(),M[f].m(h,k))}for(;f<M.length;f+=1)M[f].d(1);M.length=X.length}if(A&0){U=ee(ne);let f;for(f=0;f<U.length;f+=1){const N=we(p,U,f);_[f]?_[f].p(N,A):(_[f]=je(N),_[f].c(),_[f].m(B,F))}for(;f<_.length;f+=1)_[f].d(1);_.length=U.length}I!==(I=$(p))&&(W.d(1),W=I(p),W&&(W.c(),W.m(j.parentNode,j)))},i:Ce,o:Ce,d(p){p&&(H(s),H(l),H(h),H(L),H(j)),fe(y,p),fe(M,p),fe(_,p),W.d(p)}}}const lt=3,ne="ABCDEFGH",Ne="87654321";function ct(r,s,C){const l=new et.Game;var h=new Map([["p","♟"],["r","♜"],["n","♞"],["b","♝"],["q","♛"],["k","♚"],[null," "]]);const g=L=>L?h.get(L.toLowerCase()):" ";var d=l.exportJson(),G=!1,b=["",""],E=[],S=["",0,0];const k=(L,j,R,y)=>{S=[y+R,L,j],C(3,E=l.moves(S[0]))},B=(L,j)=>{l.move(S[0],j+L),C(0,d=l.exportJson()),C(1,G=!0),setTimeout(()=>{d.isFinished||C(2,b=Object.entries(l.aiMove(lt))[0]),C(0,d=l.exportJson()),C(1,G=!1)},500)};return[d,G,b,E,g,k,B,(L,j,R,y)=>k(L,j,R,y),()=>C(3,E=[]),(L,j,R)=>!G&&E.includes(L+j)?(R.preventDefault(),!0):!1,(L,j)=>B(L,j)]}class ut extends $e{constructor(s){super(),ze(this,s,ct,rt,Je,{})}}export{ut as component};
